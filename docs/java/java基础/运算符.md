---
title: 运算符
date: 2021-03-16
categories:
 - java
tags:
 - java基础
---

:::tip

Java运算符大部分都是来运算基础数据类型的。例外是“=”、“==”和“!=”，它们能操作所有对象。除此以外，String类支持“+”和“+=”。

:::

## 优先级

| 名称     | 运算符                           |
| -------- | -------------------------------- |
| 算术运算 | +，-，*，/，%，++，--            |
| 赋值运算 | =，+=，-=，*=，/=，%=， &=，^=   |
| 位运算   | &，\|，^，~，<<，>>，>>>         |
| 关系运算 | >，<，>=，<=，==，!=，instanceof |
| 逻辑运算 | &&，\|\|，!                      |
| 三目运算 | ? :                              |

## 实战

### 一元运算

```java
int i = 1;
        
int m = i++; // 先赋值，再运算。m = 1, i = 2
int n = ++i; // 先运算，再赋值。i = 3, n = 3
int k = ++i + i++; // 后缀运算优先级最高。i = 4, k = 8, i = 5
int s = i++ + ++i; // i=5, k = 5 + 7 = 12, i = 7
```

### 取反运算

```java
int a = 3; 	// 0b00000000_00000000_00000000_00000011
int b = ~a;	// 0b11111111_11111111_11111111_11111100 = -4
```

### 位移运算

由于位移的位数m为正整数，那么当m很大时，一个数经过为位移后最终都为零，显然是不对的。在Java中，根据数据类型，最大的位移位数如下表：

| **byte** | **char** | **short** | **int** | **long** | **float** | **double** | **boolean** |
| -------- | -------- | --------- | ------- | -------- | --------- | ---------- | :---------: |
| 31       | 31       | 31        | 31      | 63       | x         | x          |      x      |

在Java中，位移运算只能是整型和字符型数据。

#### 左移（<<）

```java
// 
int m = 16; // 0b00000000_00000000_00000000_00010000
int n = 16 << 1; // 0b00000000_00000000_00000000_00100000 = 32
int i = -16; // 0b11111111_11111111_11111111_11110000
int j = i << 1; // 0b11111111_11111111_11111111_11100000 = -32
```

#### 右移（>>）

```java
//
int m = 16; // 0b00000000_00000000_00000000_00010000
int n = m >> 1; // 0b00000000_00000000_00000000_00001000 = 8
int i = -16; // 0b11111111_11111111_11111111_11110000
int j = i >> 1; // 0b11111111_11111111_11111111_11111000 = -8
```

#### 无符号右移（>>>）

```java
//
int m = 3; // 0b00000000_00000000_00000000_00000011
int n = m >>> 1; // 0b00000000_00000000_00000000_00000001 = 1
int i = -3; // 0b11111111_11111111_11111111_11111101
int j = i >>> 1; // 0b01111111_11111111_11111111_11111110 = 2147483646
```

- 左移：总是用0补齐低位
- 右移：总是用符号位补齐高位
- 无符号右移：总是用0补齐高位

## 参考链接

- [Operators](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)